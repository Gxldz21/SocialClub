{% extends 'base.html' %}
{% load thumbnail %}
{% block title %}Пост {{ posts.text }}{% endblock %}
{% block content %}
<main id="site-main">

    <!-- Post Content -->
    <section class="container">
        <article id="post">
            <div class="headings text-center">
                <div class="title">
                        <h2 class="text-title text-dark display-1">{{posts.title}}</h2>
                    </div>
                <div class="meta">
                    <a href="{% url  'social:profile' posts.author.username %}" class="link display-2 text-secondary px-1">
                        <i class="fas fa-user text-primary" style="color: #343a40!important"></i>
                        {{ posts.author.username }}
                    </a>
                    <a href="#" class="link display-2 text-secondary px-1">
                        <i class="fas fa-clock text-primary" style="color: #343a40!important"></i> {{ posts.pub_date|date:"d E Y в H:i" }}
                    </a>
                </div>
            </div>
            {% if posts.image %}
            <div class="thumbnail mt-3">
<!--                {% thumbnail posts.image "960x339" crop="center" upscale=True as im %}-->
                <img class="thumbnail" src="{{ im.url }}">
<!--                {% endthumbnail %}-->
            </div>
            {% endif %}
                <div class="content text-dark display-2 secondary-title mt-3">
                    {% if posts.text|length > 150 %}
                    <h5><pre style="white-space: pre-wrap;">{{ posts.text|safe }}</pre></h5>
                    {% else %}
                    <h5 style="text-align: center;"><pre style="white-space: pre-wrap;">{{ posts.text|safe }}</pre></h5>
                    {% endif %}
                </div>
        </article>
        <div class="post-footer mb-3">
            <div class="post-tags d-flex flex-wrap justify-content-center">
                {% for com in tags %}
                <a href="{% url  'social:tag' com.name %}" class="nav-link btn bg-light">{{com.name}}</a>
                {% endfor %}
<!--                <a href="#" class="nav-link btn bg-light">Food</a>-->
<!--                <a href="#" class="nav-link btn bg-light">Lifestyle</a>-->
<!--                <a href="#" class="nav-link btn bg-light">Techonogy</a>-->
<!--                <a href="#" class="nav-link btn bg-light">Fashion</a>-->
            </div>
        </div>
               <div class="post-comments py-2">
            <h3 class="text-center display-1 secondary-title py-2">{{comment.count}} Comments</h3>
    {% for com in comments %}
            <div class="comment-details">
                <div class="comment-item py-2">
                    <div class="d-flex">
                        <div class="comment-content">
                <strong><a href="{% url  'social:profile' com.com_author.username %}" style="color: black; text-decoration: none"> {{ com.com_author.username }}</a></strong>
                <sup>{{ com.com_date | date:'d.m.Y в H:i'}}</sup>
                            <p class="title-secondary text-dark">
                                {{ com.com_text }}
                            </p>
                        </div>
                        </div>
                    </div>
                </div>
                    {% endfor %}
            <h3 class="text-center display-1 secondary-title py-2">Оставьте комментарий</h3>
                <form method="post" action="{% url 'social:comment' posts.pk %}">{% csrf_token %}
                        <div class="comment-form">
                <textarea class="form-control mt-3" placeholder="Напишите что-нибудь..." rows="10" name="text"></textarea>
                <div class="text-center">
                    <button type="submit" class="btn btn-primary display-2 text-light mt-2">Отправить</button>
                </div>
            </div>
                </form>
        </div>
            </section>
</main>
<!--    <main>-->
<!--        <div class="container py-5">-->
<!--            <div class="row">-->
<!--                <aside class="col-12 col-md-3">-->
<!--                    <ul class="list-group list-group-flush">-->
<!--                        <li class="list-group-item">-->
<!--                            Дата публикации: {{ posts.pub_date|date:"d E Y" }}-->
<!--                        </li>-->
<!--                        {% if group_posts.group.slug %}-->
<!--                            <li class="list-group-item">-->
<!--                                Группа: {{ group_post.group.title }}-->
<!--                                <a href="{% url 'social:group' group_posts.group.slug %}">-->
<!--                                    {{ group_posts.group.title }}-->
<!--                                </a>-->
<!--                            </li>-->
<!--                        {% endif %}-->
<!--                        <li class="list-group-item">-->
<!--                            Автор: {{ posts.author.username }}-->
<!--                        </li>-->
<!--                        <li class="list-group-item d-flex justify-content-between align-items-center">-->
<!--                            Всего постов автора: {{ count }}-->
<!--                        </li>-->
<!--                        <li class="list-group-item">-->
<!--                            {#                все посты пользователя {{ posts.author.username }}#}-->
<!--                            все посты пользователя <a href="{% url  'social:profile' posts.author.username %}">-->
<!--                            {{ posts.author.username }}-->
<!--                        </a>-->
<!--                        </li>-->
<!--                        <li class="list-group-item">-->
<!--                            {% if user_post ==  posts.author.username %}-->
<!--                            <p><a class="btn btn-primary" href="{% url  'social:update' posts.pk %}">Редактировать</a>-->
<!--                            </p>-->
<!--                        {% endif %}</li>-->
<!--                    </ul>-->
<!--                </aside>-->
<!--                <article class="col-12 col-md-9">-->
<!--                    {% thumbnail posts.image "960x339" crop="center" upscale=True as im %}-->
<!--                        <img class="card-img my-2" src="{{ im.url }}">-->
<!--                    {% endthumbnail %}-->
<!--                    <p>-->
<!--                        {{ posts.text }}-->
<!--                    </p>-->
<!--                    <hr>-->
<!--                        <div class="container">-->
<!--                          <div class="item"><H3>Комментарии: {{ comment.count }}</H3></div>-->
<!--                        </div>-->
<!--                    <hr>-->
<!--                {% if comments %}-->
<!--                    {% for com in comments %}-->
<!--                        <strong><a href="{% url  'social:profile' com.com_author.username %}" style="color: black; text-decoration: none"> {{ com.com_author.username }}</a></strong>-->
<!--                        <sup>{{ com.com_date | date:'d.m.Y в H:i'}}</sup>-->
<!--                        <p>{{ com.com_text }}</p>-->
<!--                        <hr>-->
<!--                    {% endfor %}-->
<!--                {% else %}-->
<!--                    <p>Пока пусто...</p>-->
<!--                {% endif %}-->
<!--                <form method="post" action="{% url 'social:comment' posts.pk %}">{% csrf_token %}-->
<!--                    <div class="form-group row my-3 p-3">-->
<!--                        <textarea placeholder="Напишите что-нибудь..." name="text" cols="40" rows="2"-->
<!--                                  class="form-control" required id="text"></textarea>-->
<!--                    </div>-->
<!--                    <p><button class="btn btn-primary" type="submit">Отправить</button></p>-->
<!--                    </form>-->
<!--                </article>-->
<!--            </div>-->
<!--        </div>-->
<!--    <style>-->
<!--        .container {-->
<!--          display: flex; /* устанавливаем режим flexbox */-->
<!--        }-->
<!--        .item {-->
<!--            display: flex; /* устанавливаем режим flexbox */-->
<!--            flex: 1; /* устанавливаем равные пропорции ширины элементов */-->
<!--        }</style>-->
<!--    </main>-->
{% endblock content %}